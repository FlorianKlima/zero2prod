---
id: xbunl
name: Web Basic Main
file_version: 1.0.2
app_version: 0.9.8-4
file_blobs:
  src/main.rs: 63f47bb057dee7028e8e29b81b4bf40c4cfb2be7
---

This is the basic main function to start a Actix webserver. Note the use of the tokio macro instead of the actix macro.
<!-- NOTE-swimm-snippet: the lines below link your snippet to Swimm -->
### ðŸ“„ src/main.rs
```renderscript
â¬œ 5      use zero2prod::startup::Application;
â¬œ 6      use zero2prod::telemetry::{get_subscriber, init_subscriber};
â¬œ 7      
ðŸŸ© 8      #[tokio::main]
ðŸŸ© 9      async fn main() -> anyhow::Result<()> {
ðŸŸ© 10         let subscriber = get_subscriber("zero2prod".into(), "info".into(), std::io::stdout);
ðŸŸ© 11         init_subscriber(subscriber);
ðŸŸ© 12     
ðŸŸ© 13         let configuration = get_configuration().expect("Failed to read configuration.");
ðŸŸ© 14         let application = Application::build(configuration.clone()).await?;
ðŸŸ© 15         let application_task = tokio::spawn(application.run_until_stopped());
ðŸŸ© 16         let worker_task = tokio::spawn(run_worker_until_stopped(configuration));
ðŸŸ© 17     
ðŸŸ© 18         tokio::select! {
ðŸŸ© 19             o = application_task => report_exit("API", o),
ðŸŸ© 20             o = worker_task =>  report_exit("Background worker", o),
ðŸŸ© 21         };
ðŸŸ© 22     
ðŸŸ© 23         Ok(())
ðŸŸ© 24     }
â¬œ 25     
â¬œ 26     fn report_exit(task_name: &str, outcome: Result<Result<(), impl Debug + Display>, JoinError>) {
â¬œ 27         match outcome {
```

<br/>

This file was generated by Swimm. [Click here to view it in the app](https://app.swimm.io/repos/Z2l0aHViJTNBJTNBemVybzJwcm9kJTNBJTNBRmxvcmlhbktsaW1h/docs/xbunl).